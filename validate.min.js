(function(m,n,d){var f={messages:{required:"The %s field is required.",matches:"The %s field does not match the %s field.",valid_email:"The %s field must contain a valid email address.",valid_emails:"The %s field must contain all valid email addresses.",min_length:"The %s field must be at least %s characters in length.",max_length:"The %s field must not exceed %s characters in length.",exact_length:"The %s field must be exactly %s characters in length.",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",numeric:"The %s field must contain only numbers.",integer:"The %s field must contain an integer.",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string."},callback:function(r){}};var k=/^(.+?)\[(.+)\]$/,j=/^[0-9]+$/,g=/^\-?[0-9]+$/,a=/^\-?[0-9]*\.?[0-9]+$/,p=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i,c=/^[a-z]+$/i,h=/^[a-z0-9]+$/i,e=/^[a-z0-9_-]+$/i,b=/^[0-9]+$/i,q=/^[1-9][0-9]*$/i,o=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,l=/[^a-zA-Z0-9\/\+=]/i;var i=function(t,r,w){this.callback=w||f.callback;this.errors=[];this.fields={};this.form=n.forms[t]||{};this.messages={};this.handlers={};for(var s=0,v=r.length;s<v;s++){var u=r[s];if(!u.field||!u.rules){continue}this.fields[u.field]={name:u.field,display:u.label||u.field,rules:u.rules,id:null,type:null,value:null,checked:null}}this.form.onsubmit=(function(x){return function(y){try{return x._validateForm(y)}catch(z){}}})(this)};i.prototype.setMessage=function(s,r){this.messages[s]=r;return this};i.prototype.registerCallback=function(r,s){if(r&&typeof r==="string"&&s&&typeof s==="function"){this.handlers[r]=s}return this};i.prototype._validateForm=function(t){this.errors=[];for(var s in this.fields){if(this.fields.hasOwnProperty(s)){var u=this.fields[s]||{},r=this.form[u.name];if(r&&r!==d){u.id=r.id;u.type=r.type;u.value=r.value;u.checked=r.checked}this._validateField(u)}}if(typeof this.callback==="function"){this.callback(this.errors,t)}if(this.errors.length>0){if(t&&t.preventDefault){t.preventDefault()}else{return false}}return true};i.prototype._validateField=function(x){var y=x.rules.split("|");if(x.rules.indexOf("required")===-1&&(!x.value||x.value===""||x.value===d)){return}for(var v=0,t=y.length;v<t;v++){var r=y[v],u=null,w=false;if(parts=k.exec(r)){r=parts[1];u=parts[2]}if(typeof this._hooks[r]==="function"){if(!this._hooks[r].apply(this,[x,u])){w=true}}else{if(r.substring(0,9)==="callback_"){r=r.substring(9,r.length);if(typeof this.handlers[r]==="function"){if(this.handlers[r].apply(this,[x.value])===false){w=true}}}}if(w){var s=this.messages[r]||f.messages[r],z="An error has occurred with the "+x.display+" field.";if(s){z=s.replace("%s",x.display);if(u){z=z.replace("%s",(this.fields[u])?this.fields[u].display:u)}}this.errors.push({id:x.id,name:x.name,message:z});break}}};i.prototype._hooks={required:function(s){var r=s.value;if(s.type==="checkbox"){return(s.checked===true)}return(r!==null&&r!=="")},matches:function(s,r){if(el=this.form[r]){return s.value===el.value}return false},valid_email:function(r){return p.test(r.value)},valid_emails:function(t){var r=t.value.split(",");for(var s=0;s<r.length;s++){if(!p.test(r[s])){return false}}return true},min_length:function(s,r){if(!j.test(r)){return false}return(s.value.length>=parseInt(r,10))},max_length:function(s,r){if(!j.test(r)){return false}return(s.value.length<=parseInt(r,10))},exact_length:function(s,r){if(!j.test(r)){return false}return(s.value.length===parseInt(r,10))},greater_than:function(r,s){if(!a.test(r.value)){return false}return(parseFloat(r.value)>parseFloat(s))},less_than:function(r,s){if(!a.test(r.value)){return false}return(parseFloat(r.value)<parseFloat(s))},alpha:function(r){return(c.test(r.value))},alpha_numeric:function(r){return(h.test(r.value))},alpha_dash:function(r){return(e.test(r.value))},numeric:function(r){return(a.test(r.value))},integer:function(r){return(g.test(r.value))},decimal:function(r){return(a.test(r.value))},is_natural:function(r){return(b.test(r.value))},is_natural_no_zero:function(r){return(q.test(r.value))},valid_ip:function(r){return(o.test(r.value))},valid_base64:function(r){return(l.test(r.value))}};m.FormValidator=i})(window,document);